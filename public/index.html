<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RulesChat Widget Prototype</title>
    <link rel="stylesheet" href="./widget.css" />
  </head>
  <body>
    <main class="page">
      <section class="widget" aria-labelledby="ruleschat-title">
        <header class="widget__header">
          <div>
            <p class="widget__eyebrow" data-widget-eyebrow>League Rules</p>
            <h1 id="ruleschat-title" class="widget__title" data-widget-title>
              RulesChat
            </h1>
            <p class="widget__notice" data-widget-notice>
              Answers are based only on the posted rule documents.
            </p>
          </div>
        </header>

        <section class="admin" aria-labelledby="admin-title">
          <div class="admin__header">
            <h2 id="admin-title">Admin settings (prototype)</h2>
            <p class="admin__subtitle">
              Update the text and document links below to match your league.
              These changes only apply in this browser session.
            </p>
          </div>
          <section class="admin__plan" aria-label="Plan and limits">
            <div class="admin__plan-summary">
              <div>
                <p class="admin__plan-label">Plan &amp; limits</p>
                <p class="admin__plan-name" data-plan-name>Starter</p>
              </div>
              <div class="admin__plan-metrics">
                <p>
                  Document limit:
                  <strong data-plan-limit>8</strong>
                </p>
                <p>
                  Usage:
                  <strong data-plan-usage>0</strong>
                </p>
              </div>
            </div>
            <div class="admin__plan-upsell" data-plan-upsell>
              <p>
                You&apos;ve reached the document limit for this plan. Upgrade to
                add more documents.
              </p>
              <div class="admin__plan-actions">
                <button type="button" data-upgrade-pro>
                  Upgrade to Pro ($15/mo – 28 docs)
                </button>
                <button type="button" data-upgrade-power>
                  Upgrade to Power ($20/mo – 75 docs)
                </button>
              </div>
            </div>
          </section>
          <form class="admin__form" aria-label="Widget admin settings">
            <label class="admin__label" for="admin-title-input">Widget title</label>
            <input
              id="admin-title-input"
              name="widgetTitle"
              type="text"
              value="RulesChat"
            />

            <label class="admin__label" for="admin-eyebrow-input"
              >Eyebrow text</label
            >
            <input
              id="admin-eyebrow-input"
              name="widgetEyebrow"
              type="text"
              value="League Rules"
            />

            <label class="admin__label" for="admin-notice-input"
              >Notice text</label
            >
            <input
              id="admin-notice-input"
              name="widgetNotice"
              type="text"
              value="Answers are based only on the posted rule documents."
            />

            <label class="admin__label" for="admin-theme-preset"
              >Theme color</label
            >
            <div class="admin__theme-controls">
              <select id="admin-theme-preset" name="themePreset">
                <option value="#ef4444">Red</option>
                <option value="#f97316">Orange</option>
                <option value="#eab308">Yellow</option>
                <option value="#84cc16">Green-Yellow</option>
                <option value="#22c55e">Green</option>
                <option value="#14b8a6">Green-Blue</option>
                <option value="#3b82f6" selected>Blue</option>
                <option value="#6366f1">Purple-Blue</option>
                <option value="#a855f7">Purple</option>
                <option value="#ec4899">Red-Purple</option>
                <option value="#111827">Black</option>
                <option value="#6b7280">Gray</option>
                <option value="custom">Custom</option>
              </select>
              <input
                id="admin-theme-input"
                name="themeColor"
                type="color"
                value="#3b82f6"
                aria-label="Theme color picker"
              />
            </div>

            <div class="admin__divider" role="presentation"></div>
            <p class="admin__section-title">Documents</p>
            <p class="admin__note">
              Uploading PDFs will be handled by the backend in a future milestone.
              For now, paste a hosted PDF link for each document.
            </p>
            <div class="admin__documents" data-admin-documents></div>
          </form>
        </section>

        <section class="documents" aria-labelledby="documents-title">
          <div class="documents__header">
            <h2 id="documents-title">Documents</h2>
            <p class="documents__subtitle">Tap a document to download the PDF.</p>
          </div>
          <div data-documents-list></div>
        </section>

        <section class="chat" aria-labelledby="chat-title">
          <div class="chat__header">
            <h2 id="chat-title">Ask about the rules</h2>
            <p class="chat__subtitle">
              Ask a question about equipment, materials, or engagement rules.
            </p>
          </div>

          <div class="chat__messages" role="log" aria-live="polite">
            <article class="message message--assistant">
              <p class="message__label">RulesChat</p>
              <p>
                Hello! Ask a rules question to get answers grounded in the posted
                documents.
              </p>
            </article>
          </div>

          <form class="chat__composer" aria-label="Send a rules question">
            <label class="chat__label" for="chat-input">Your question</label>
            <div class="chat__controls">
              <input
                id="chat-input"
                name="question"
                type="text"
                maxlength="250"
                placeholder="Type your question (250 characters max)"
                required
              />
              <button type="submit">Send</button>
            </div>
            <p
              class="chat__count is-hidden"
              data-char-count
              aria-live="polite"
            >
              Character limit reached (250 max).
            </p>
            <p class="chat__hint" data-model-status role="status" aria-live="polite">
              Model status: ready to load for local answers.
            </p>
            <div class="chat__model-actions">
              <button type="button" data-model-action>Load model</button>
              <span class="chat__model-detail" data-model-detail></span>
            </div>
            <p class="chat__hint" data-chat-hint>
              Answers are generated locally in your browser using WebGPU.
            </p>
          </form>
        </section>
      </section>
    </main>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.min.js"
      integrity="sha512-7n9OCB1rQ5Jf8B5xYu88f9f3+oSSKckbD0k22I1Rt9mJjT7EHq70GDoaX1ut1tr4QGhhXyuP6s4r+zdSdaHKeQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script type="module" src="./widget.js"></script>
  </body>
</html>
